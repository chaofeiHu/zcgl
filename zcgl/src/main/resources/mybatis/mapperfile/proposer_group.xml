<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="confing/mappers.proposer_group">
  <resultMap id="BaseResultMap" type="com.hz.demo.model.proposer_group">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Sep 29 16:55:15 CST 2018.
    -->
    <result column="ID" jdbcType="INTEGER" property="id" />
    <result column="GROUP_ID" jdbcType="VARCHAR" property="groupId" />
    <result column="PROPOSER_ID" jdbcType="VARCHAR" property="proposerId" />
    <result column="BACK1" jdbcType="VARCHAR" property="back1" />
    <result column="BACK2" jdbcType="VARCHAR" property="back2" />
    <result column="BACK3" jdbcType="VARCHAR" property="back3" />
    <association property="subjectGroup" javaType="com.hz.demo.model.subject_group">
      <id column="ID" jdbcType="INTEGER" property="id" />
      <result column="JUDGING_CODE" jdbcType="VARCHAR" property="judgingCode" />
      <result column="GROUP_NO" jdbcType="VARCHAR" property="groupNo" />
      <result column="GROUP_NAME" jdbcType="VARCHAR" property="groupName" />
      <result column="YEAR_NO" jdbcType="VARCHAR" property="yearNo" />
      <result column="PROFESSIAL_ID" jdbcType="VARCHAR" property="professialId" />
    </association>
  </resultMap>

  <resultMap id="BaseResultMap1" type="com.hz.demo.model.proposer_group">
    <result column="rn" jdbcType="INTEGER" property="id" />
    <result column="GROUP_ID" jdbcType="VARCHAR" property="groupId" />
    <association property="baseProposer"  javaType="com.hz.demo.model.base_proposer">
      <id column="propid" property="id" jdbcType="INTEGER" />
      <result column="unit_name" property="declareUnitcode" jdbcType="VARCHAR" />
      <result column="BASIC_UNITCODE" property="basicUnitcode" jdbcType="VARCHAR" />
      <result column="DISPLAY_NAME" property="displayName" jdbcType="VARCHAR" />
      <result column="MOBILEPHONE" property="mobilephone" jdbcType="VARCHAR" />
      <result column="EMAIL" property="email" jdbcType="VARCHAR" />
      <result column="ID_CARD_NO" property="idCardNo" jdbcType="VARCHAR" />
      <result column="ADD_TIME" property="addTime" jdbcType="TIMESTAMP" />
      <result column="STATE" property="state" jdbcType="INTEGER" />
    </association>
    <association property="proposerMsg" javaType="com.hz.demo.model.shenbao.ProposerMsg">
      <id column="id" property="id" jdbcType="VARCHAR"/>
      <result column="user_id" property="userId" jdbcType="VARCHAR" />
      <result column="propose_date" property="proposeDate" jdbcType="TIMESTAMP" />
      <result column="duty_level" property="dutyLevel" jdbcType="VARCHAR" />
      <result column="major_name" property="major" jdbcType="VARCHAR" />
      <result column="duty_time_limit" property="dutyTimeLimit" jdbcType="VARCHAR" />
      <result column="position" property="position" jdbcType="VARCHAR" />
      <result column="position_get_time" property="positionGetTime" jdbcType="TIMESTAMP" />
      <result column="position_level" property="positionLevel" jdbcType="VARCHAR" />
      <result column="position_name" property="proposePosition" jdbcType="VARCHAR" />
      <result column="propose_state" property="proposeState" jdbcType="VARCHAR" />
      <result column="objective_point" property="objectivePoint" jdbcType="VARCHAR" />
      <result column="total_point" property="totalPoint" jdbcType="VARCHAR" />
      <result column="area_number" property="areaNumber" jdbcType="VARCHAR" />
      <result column="BACKUP1" property="backup1" jdbcType="VARCHAR" />
      <result column="BACKUP2" property="backup2" jdbcType="VARCHAR" />
      <result column="BACKUP3" property="backup3" jdbcType="VARCHAR" />
      <result column="userpicurl" property="userpicurl" jdbcType="VARCHAR" />
      <result column="usertype" property="usertype" jdbcType="VARCHAR" />
      <result column="frontidcardpicurl" property="frontidcardpicurl" jdbcType="VARCHAR" />
      <result column="behindidcardpicurl" property="behindidcardpicurl" jdbcType="VARCHAR" />
      <result column="extrainfo" property="extrainfo" jdbcType="VARCHAR" />
      <result column="createtime" property="createtime" jdbcType="TIMESTAMP" />
      <result column="statu" property="statu" jdbcType="VARCHAR" />
      <result column="fristeducation" property="fristeducation" jdbcType="VARCHAR" />
      <result column="fristeducationurl" property="fristeducationurl" jdbcType="VARCHAR" />
      <result column="fristeducationtime" property="fristeducationtime" jdbcType="TIMESTAMP" />
      <result column="maxeducation" property="maxeducation" jdbcType="VARCHAR" />
      <result column="maxeducationtime" property="maxeducationtime" jdbcType="TIMESTAMP" />
      <result column="maxeducationurl" property="maxeducationurl" jdbcType="VARCHAR" />
      <result column="profess" property="profess" jdbcType="VARCHAR" />
      <result column="profess_certificate" property="professCertificate" jdbcType="VARCHAR" />
      <result column="startworktime" property="startworktime" jdbcType="TIMESTAMP" />
      <result column="nowjob" property="nowjob" jdbcType="VARCHAR" />
      <result column="nowjob_time" property="nowjobTime" jdbcType="TIMESTAMP" />
      <result column="foreign_name" property="foreignName" jdbcType="VARCHAR" />
      <result column="foreign_level" property="foreignLevel" jdbcType="VARCHAR" />
      <result column="foreign_time" property="foreignTime" jdbcType="TIMESTAMP" />
      <result column="current_post" property="currentPost" jdbcType="VARCHAR" />
      <result column="current_post_series" property="currentPostSeries" jdbcType="VARCHAR" />
      <result column="current_post_level" property="currentPostLevel" jdbcType="VARCHAR" />
      <result column="current_post_get_time" property="currentPostGetTime" jdbcType="TIMESTAMP" />
      <result column="current_post_engage_time" property="currentPostEngageTime" jdbcType="TIMESTAMP" />
      <result column="other_post" property="otherPost" jdbcType="VARCHAR" />
      <result column="other_post_series" property="otherPostSeries" jdbcType="VARCHAR" />
      <result column="other_post_level" property="otherPostLevel" jdbcType="VARCHAR" />
      <result column="other_post_engage_time" property="otherPostEngageTime" jdbcType="TIMESTAMP" />
      <result column="administrative_post" property="administrativePost" jdbcType="VARCHAR" />
      <result column="administrative_post_time" property="administrativePostTime" jdbcType="TIMESTAMP" />
      <result column="social_post" property="socialPost" jdbcType="VARCHAR" />
      <result column="social_post_phone" property="socialPostPhone" jdbcType="VARCHAR" />
      <result column="years_one" property="yearsOne" jdbcType="VARCHAR" />
      <result column="years_one_info" property="yearsOneInfo" jdbcType="VARCHAR" />
      <result column="years_two" property="yearsTwo" jdbcType="VARCHAR" />
      <result column="years_two_info" property="yearsTwoInfo" jdbcType="VARCHAR" />
      <result column="years_three" property="yearsThree" jdbcType="VARCHAR" />
      <result column="years_three_info" property="yearsThreeInfo" jdbcType="VARCHAR" />
      <result column="years_four" property="yearsFour" jdbcType="VARCHAR" />
      <result column="years_four_info" property="yearsFourInfo" jdbcType="VARCHAR" />
      <result column="years_five" property="yearsFive" jdbcType="VARCHAR" />
      <result column="years_five_info" property="yearsFiveInfo" jdbcType="VARCHAR" />
      <result column="pdfurl" property="pdfurl" jdbcType="VARCHAR" />
      <result column="progress" property="progress" jdbcType="VARCHAR" />
      <result column="stat" property="stat" jdbcType="VARCHAR" />
      <result column="professial_name" property="shenbaomajorId" jdbcType="VARCHAR" />
      <result column="stat2" property="stat2" jdbcType="VARCHAR" />
      <result column="pingshentype" property="pingshentype" jdbcType="VARCHAR" />
      <result column="JUDGING_STAGE" property="judgingStage" jdbcType="VARCHAR" />
      <result column="BASE_JUDGING_SERIES" property="baseJudgingSeries" jdbcType="VARCHAR" />
      <result column="REVIEW_SERIES_NAME" property="reviewSeries" jdbcType="VARCHAR" />
      <result column="SEX" property="sex" jdbcType="VARCHAR" />
      <result column="nation_name" property="nation" jdbcType="VARCHAR" />
      <result column="political_name" property="politicalOutlook" jdbcType="VARCHAR" />
      <result column="EDU_EDU" property="eduEdu" jdbcType="VARCHAR" />
      <result column="degree_name" property="eduDegree" jdbcType="VARCHAR" />
      <result column="EDU_MAJOR" property="eduMajor" jdbcType="VARCHAR" />
      <result column="REPORT_DATE" property="reportDate" jdbcType="TIMESTAMP" />
      <result column="CURRENT_STATE" property="currentState" jdbcType="VARCHAR" />
    </association>

  </resultMap>

  <resultMap id="BaseResultMap2" type="com.hz.demo.model.proposer_group">
    <result column="gid" jdbcType="INTEGER" property="id" />
    <result column="GROUP_ID" jdbcType="VARCHAR" property="groupId" />
    <association property="baseProposer"  javaType="com.hz.demo.model.base_proposer">
      <id column="propid" property="id" jdbcType="INTEGER" />
      <result column="unit_name" property="declareUnitcode" jdbcType="VARCHAR" />
      <result column="BASIC_UNITCODE" property="basicUnitcode" jdbcType="VARCHAR" />
      <result column="DISPLAY_NAME" property="displayName" jdbcType="VARCHAR" />
      <result column="MOBILEPHONE" property="mobilephone" jdbcType="VARCHAR" />
      <result column="EMAIL" property="email" jdbcType="VARCHAR" />
      <result column="ID_CARD_NO" property="idCardNo" jdbcType="VARCHAR" />
      <result column="ADD_TIME" property="addTime" jdbcType="TIMESTAMP" />
      <result column="STATE" property="state" jdbcType="INTEGER" />
    </association>
    <association property="proposerMsg" javaType="com.hz.demo.model.shenbao.ProposerMsg">
      <id column="id" property="id" jdbcType="VARCHAR"/>
      <result column="user_id" property="userId" jdbcType="VARCHAR" />
      <result column="propose_date" property="proposeDate" jdbcType="TIMESTAMP" />
      <result column="duty_level" property="dutyLevel" jdbcType="VARCHAR" />
      <result column="major_name" property="major" jdbcType="VARCHAR" />
      <result column="duty_time_limit" property="dutyTimeLimit" jdbcType="VARCHAR" />
      <result column="position" property="position" jdbcType="VARCHAR" />
      <result column="position_get_time" property="positionGetTime" jdbcType="TIMESTAMP" />
      <result column="position_level" property="positionLevel" jdbcType="VARCHAR" />
      <result column="position_name" property="proposePosition" jdbcType="VARCHAR" />
      <result column="propose_state" property="proposeState" jdbcType="VARCHAR" />
      <result column="objective_point" property="objectivePoint" jdbcType="VARCHAR" />
      <result column="total_point" property="totalPoint" jdbcType="VARCHAR" />
      <result column="area_number" property="areaNumber" jdbcType="VARCHAR" />
      <result column="BACKUP1" property="backup1" jdbcType="VARCHAR" />
      <result column="BACKUP2" property="backup2" jdbcType="VARCHAR" />
      <result column="BACKUP3" property="backup3" jdbcType="VARCHAR" />
      <result column="userpicurl" property="userpicurl" jdbcType="VARCHAR" />
      <result column="usertype" property="usertype" jdbcType="VARCHAR" />
      <result column="frontidcardpicurl" property="frontidcardpicurl" jdbcType="VARCHAR" />
      <result column="behindidcardpicurl" property="behindidcardpicurl" jdbcType="VARCHAR" />
      <result column="extrainfo" property="extrainfo" jdbcType="VARCHAR" />
      <result column="createtime" property="createtime" jdbcType="TIMESTAMP" />
      <result column="statu" property="statu" jdbcType="VARCHAR" />
      <result column="fristeducation" property="fristeducation" jdbcType="VARCHAR" />
      <result column="fristeducationurl" property="fristeducationurl" jdbcType="VARCHAR" />
      <result column="fristeducationtime" property="fristeducationtime" jdbcType="TIMESTAMP" />
      <result column="maxeducation" property="maxeducation" jdbcType="VARCHAR" />
      <result column="maxeducationtime" property="maxeducationtime" jdbcType="TIMESTAMP" />
      <result column="maxeducationurl" property="maxeducationurl" jdbcType="VARCHAR" />
      <result column="profess" property="profess" jdbcType="VARCHAR" />
      <result column="profess_certificate" property="professCertificate" jdbcType="VARCHAR" />
      <result column="startworktime" property="startworktime" jdbcType="TIMESTAMP" />
      <result column="nowjob" property="nowjob" jdbcType="VARCHAR" />
      <result column="nowjob_time" property="nowjobTime" jdbcType="TIMESTAMP" />
      <result column="foreign_name" property="foreignName" jdbcType="VARCHAR" />
      <result column="foreign_level" property="foreignLevel" jdbcType="VARCHAR" />
      <result column="foreign_time" property="foreignTime" jdbcType="TIMESTAMP" />
      <result column="current_post" property="currentPost" jdbcType="VARCHAR" />
      <result column="current_post_series" property="currentPostSeries" jdbcType="VARCHAR" />
      <result column="current_post_level" property="currentPostLevel" jdbcType="VARCHAR" />
      <result column="current_post_get_time" property="currentPostGetTime" jdbcType="TIMESTAMP" />
      <result column="current_post_engage_time" property="currentPostEngageTime" jdbcType="TIMESTAMP" />
      <result column="other_post" property="otherPost" jdbcType="VARCHAR" />
      <result column="other_post_series" property="otherPostSeries" jdbcType="VARCHAR" />
      <result column="other_post_level" property="otherPostLevel" jdbcType="VARCHAR" />
      <result column="other_post_engage_time" property="otherPostEngageTime" jdbcType="TIMESTAMP" />
      <result column="administrative_post" property="administrativePost" jdbcType="VARCHAR" />
      <result column="administrative_post_time" property="administrativePostTime" jdbcType="TIMESTAMP" />
      <result column="social_post" property="socialPost" jdbcType="VARCHAR" />
      <result column="social_post_phone" property="socialPostPhone" jdbcType="VARCHAR" />
      <result column="years_one" property="yearsOne" jdbcType="VARCHAR" />
      <result column="years_one_info" property="yearsOneInfo" jdbcType="VARCHAR" />
      <result column="years_two" property="yearsTwo" jdbcType="VARCHAR" />
      <result column="years_two_info" property="yearsTwoInfo" jdbcType="VARCHAR" />
      <result column="years_three" property="yearsThree" jdbcType="VARCHAR" />
      <result column="years_three_info" property="yearsThreeInfo" jdbcType="VARCHAR" />
      <result column="years_four" property="yearsFour" jdbcType="VARCHAR" />
      <result column="years_four_info" property="yearsFourInfo" jdbcType="VARCHAR" />
      <result column="years_five" property="yearsFive" jdbcType="VARCHAR" />
      <result column="years_five_info" property="yearsFiveInfo" jdbcType="VARCHAR" />
      <result column="pdfurl" property="pdfurl" jdbcType="VARCHAR" />
      <result column="progress" property="progress" jdbcType="VARCHAR" />
      <result column="stat" property="stat" jdbcType="VARCHAR" />
      <result column="professial_name" property="shenbaomajorId" jdbcType="VARCHAR" />
      <result column="stat2" property="stat2" jdbcType="VARCHAR" />
      <result column="pingshentype" property="pingshentype" jdbcType="VARCHAR" />
      <result column="JUDGING_STAGE" property="judgingStage" jdbcType="VARCHAR" />
      <result column="BASE_JUDGING_SERIES" property="baseJudgingSeries" jdbcType="VARCHAR" />
      <result column="REVIEW_SERIES_NAME" property="reviewSeries" jdbcType="VARCHAR" />
      <result column="SEX" property="sex" jdbcType="VARCHAR" />
      <result column="nation_name" property="nation" jdbcType="VARCHAR" />
      <result column="political_name" property="politicalOutlook" jdbcType="VARCHAR" />
      <result column="EDU_EDU" property="eduEdu" jdbcType="VARCHAR" />
      <result column="degree_name" property="eduDegree" jdbcType="VARCHAR" />
      <result column="EDU_MAJOR" property="eduMajor" jdbcType="VARCHAR" />
      <result column="REPORT_DATE" property="reportDate" jdbcType="TIMESTAMP" />
      <result column="CURRENT_STATE" property="currentState" jdbcType="VARCHAR" />
    </association>

  </resultMap>

  <insert id="insert" parameterType="com.hz.demo.model.proposer_group">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Sep 29 16:55:15 CST 2018.
    -->
    insert into BASE_PROPOSER_GROUP (ID, GROUP_ID, PROPOSER_ID,
      BACK1, BACK2, BACK3
      )
    values (SEQ_BASE_PROPOSER_GROUP.NEXTVAL, #{groupId,jdbcType=VARCHAR}, #{proposerId,jdbcType=VARCHAR},
      #{back1,jdbcType=VARCHAR}, #{back2,jdbcType=VARCHAR}, #{back3,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.hz.demo.model.proposer_group">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Sep 29 16:55:15 CST 2018.
    -->
    insert into BASE_PROPOSER_GROUP
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="groupId != null">
        GROUP_ID,
      </if>
      <if test="proposerId != null">
        PROPOSER_ID,
      </if>
      <if test="back1 != null">
        BACK1,
      </if>
      <if test="back2 != null">
        BACK2,
      </if>
      <if test="back3 != null">
        BACK3,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="groupId != null">
        #{groupId,jdbcType=VARCHAR},
      </if>
      <if test="proposerId != null">
        #{proposerId,jdbcType=VARCHAR},
      </if>
      <if test="back1 != null">
        #{back1,jdbcType=VARCHAR},
      </if>
      <if test="back2 != null">
        #{back2,jdbcType=VARCHAR},
      </if>
      <if test="back3 != null">
        #{back3,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>

  <delete id="deleteByPrimaryKey" parameterType="Integer">
    delete from BASE_PROPOSER_GROUP
    where ID = #{id}
  </delete>
  <!--根据条件查询参评人分组数据-->
  <select id="selectlistPage" resultType="pd" parameterType="page">
     <!-- select distinct a.*,t1.PROFESSIAL_NAME from BASE_SUBJECT_GROUP a
      left join BASE_PROPOSER_GROUP b on a.id = b.group_id
      left join BASE_PROFESSIAL t1 on a.PROFESSIAL_ID = t1.PROFESSIAL_CODE
      where a.judging_code = #{judgingCode} and a.YEAR_NO=extract(year from sysdate)-->
    SELECT DISTINCT
    a.id,
    a.JUDGING_CODE,
    a.GROUP_NO,
    a.GROUP_NAME,
    a.YEAR_NO,
    a.PROFESSIAL_ID,
    (select count(*) from BASE_PROPOSER_GROUP where GROUP_ID=a.id) back1
    FROM
    BASE_SUBJECT_GROUP a
    WHERE
    a.judging_code = #{pd.JUDGING_CODE}
    AND a.YEAR_NO = extract(year FROM SYSDATE)
  </select>

  <!--根据条件查询参评人全部分组个数-->
  <select id="selectCount" parameterType="pd" resultType="Integer">
    select count(*) as listcount from BASE_SUBJECT_GROUP
    where JUDGING_CODE = #{judgingCode}  and YEAR_NO=extract(year from sysdate)
  </select>

  <!--查询学科分组下所有参评人数量-->
  <select id="getProposerCount" resultType="Integer">
    select  count(*)
    as listcount from BASE_PROPOSER_GROUP
    where group_id = #{groupId} and proposer_id in (
		select user_id from TB_PROPOSER_MSG where CURRENT_STATE >= 18)
  </select>

<!--查询所有分组未分组参评人 sta==1 未分组 sta == 2 已分组-->
  <select id="getProposerlistPage" resultType="pd" parameterType="page">
      select g.id as gid,g.group_id,h.* from BASE_PROPOSER_GROUP g RIGHT join
      (select a.id as propid,a.declare_unitcode,a.unit_name,a.basic_unitcode,a.display_name,a.login_name,a.mobilephone,
      a.email,a.id_card_no,a.add_time,a.state,b.*
      from
      ( select tb1.*,tb2.unit_name
      from base_proposer tb1
      left join base_unit tb2
      on tb1.declare_unitcode = tb2.unit_code)a
      left join
        (select t1.*,t2.professial_name,t3.dict_name as major_name,t4.dict_name as nation_name,
          t5.dict_name as political_name,t6.dict_name as degree_name ,t7.dict_name as position_name,
          t8.dict_name as REVIEW_SERIES_NAME
      from  (select * from
          tb_proposer_msg  where current_state >= '18') t1
          left join BASE_SERIES_PROFESSIAL t2
          on t1.shenbaomajor_id = t2.professial_code
          left join sys_dict t3 on t1.major = t3.dict_code and t3.group_name = 'INDUSTRY_INVOLVED'
          left join sys_dict t4 on t1.nation = t4.dict_code and t4.group_name = 'NATION'
          left join sys_dict t5 on t1.political_outlook = t5.dict_code and t5.group_name = 'POLITICAL_STATUS'
          left join sys_dict t6 on t1.edu_degree = t6.dict_code and t6.group_name = 'DEGREE'
          LEFT JOIN sys_dict t7 on t1.propose_position = t7.dict_code AND t7.group_name = 'POSITIONAL_TITLES'
          LEFT JOIN sys_dict t8 on t1.REVIEW_SERIES = t8.dict_code AND t8.group_name = 'REVIEW_SERIES'
      )b
      on a.id = b.user_id
      where b.base_judging_series = #{pd.JUDGING_CODE}
      and a.id in
        ( select d.proposer_id
          from BASE_PROPOSER_GROUP d
          left join BASE_SUBJECT_GROUP f
          on f.id = d.group_id where f.judging_code = #{pd.JUDGING_CODE})
        <if test="pd.DISPLAY_NAME != null and pd.DISPLAY_NAME !=''">
          and a.display_name like '%'||#{pd.DISPLAY_NAME}||'%'
        </if>
      )h
      on g.proposer_id = h.user_id  where g.group_id = #{pd.GROUP_ID}
      order by h.add_time DESC,h.display_name

  </select>

  <select id="getNoGroupProposerlistPage" resultType="pd" parameterType="page">
       select g.id as gid,g.group_id,h.* from BASE_PROPOSER_GROUP g RIGHT join
      (
      select a.id as propid,a.declare_unitcode,a.unit_name,a.basic_unitcode,a.display_name,a.login_name,a.mobilephone,
      a.email,a.id_card_no,a.add_time,a.state,b.*
      from
      ( select tb1.*,tb2.unit_name
      from base_proposer tb1
      left join base_unit tb2
      on tb1.declare_unitcode = tb2.unit_code)a
      LEFT join
      (select t1.*,t2.professial_name,t3.dict_name as major_name,t4.dict_name as nation_name,
      t5.dict_name as political_name,t6.dict_name as degree_name ,t7.dict_name as position_name,
      t8.dict_name as REVIEW_SERIES_NAME
      from
      (select * from
      tb_proposer_msg  where current_state >= '18') t1
      left join BASE_SERIES_PROFESSIAL t2
      on t1.shenbaomajor_id = t2.professial_code
      left join sys_dict t3 on t1.major = t3.dict_code and t3.group_name = 'INDUSTRY_INVOLVED'
      left join sys_dict t4 on t1.nation = t4.dict_code and t4.group_name = 'NATION'
      left join sys_dict t5 on t1.political_outlook = t5.dict_code and t5.group_name = 'POLITICAL_STATUS'
      left join sys_dict t6 on t1.edu_degree = t6.dict_code and t6.group_name = 'DEGREE'
      LEFT JOIN sys_dict t7 on t1.propose_position = t7.dict_code AND t7.group_name = 'POSITIONAL_TITLES'
      LEFT JOIN sys_dict t8 on t1.REVIEW_SERIES = t8.dict_code AND t8.group_name = 'REVIEW_SERIES'
      )b
      on b.user_id = a.id
      where b.base_judging_series = #{pd.JUDGING_CODE}
      and a.id not in
      ( select d.proposer_id from BASE_PROPOSER_GROUP d
      left join BASE_SUBJECT_GROUP f
      on f.id = d.group_id
      where f.judging_code = #{pd.JUDGING_CODE})
      <if test="pd.DISPLAY_NAME!= null and pd.DISPLAY_NAME !=''">
        and a.display_name like '%'||#{pd.DISPLAY_NAME}||'%'
      </if>
      )h
      on g.proposer_id = h.user_id
      order by h.add_time DESC, h.display_name
  </select>



  <!--查询未分组参评人数量-->
  <select id="getNoGroupListCount" resultType="Integer">
    select count(*) as listcount from base_proposer a left join  tb_proposer_msg b on b.user_id = a.id
    where b.base_judging_series =#{judgingCode} AND b.current_state = '18'
    <if test="displayName != null and displayName !=''">
      and a.display_name like '%'||#{displayName}||'%'
    </if>
      and a.id not in
    ( select  d.proposer_id from   BASE_PROPOSER_GROUP d
    left join BASE_SUBJECT_GROUP f
    on f.id = d.group_id
    where f.judging_code = #{judgingCode})
  </select>
</mapper>