<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="confing/mappers.sys_area">
  <resultMap id="BaseResultMap" type="com.hz.demo.model.sys_area">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="AREA_CODE" jdbcType="VARCHAR" property="areaCode" />
    <result column="AREA_PARENTCODE" jdbcType="VARCHAR" property="areaParentcode" />
    <result column="AREA_NAME" jdbcType="VARCHAR" property="areaName" />
    <result column="AREA_GRADE" jdbcType="VARCHAR" property="areaGrade" />
    <result column="FSORT" jdbcType="INTEGER" property="fsort" />
    <result column="ADDTIME" jdbcType="TIMESTAMP" property="addtime" />
    <result column="ADDUSERID" jdbcType="VARCHAR" property="adduserid" />
    <result column="STATE" jdbcType="INTEGER" property="state" />
    <result column="BACK1" jdbcType="VARCHAR" property="back1" />
    <result column="BACK2" jdbcType="VARCHAR" property="back2" />
    <result column="BACK3" jdbcType="VARCHAR" property="back3" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    ID, AREA_CODE, AREA_PARENTCODE, AREA_NAME, AREA_GRADE, FSORT, ADDTIME, ADDUSERID,
    STATE, BACK1, BACK2, BACK3
  </sql>
  <select id="selectByPrimaryKey" parameterType="INTEGER" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    select
    <include refid="Base_Column_List" />
    from SYS_AREA
    where ID = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="INTEGER">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    delete from SYS_AREA
    where ID = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.hz.demo.model.sys_area">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    insert into SYS_AREA (ID, AREA_CODE, AREA_PARENTCODE,
      AREA_NAME, AREA_GRADE, FSORT,
      ADDTIME, ADDUSERID, STATE,
      BACK1, BACK2, BACK3
      )
    values (#{id,jdbcType=INTEGER}, #{areaCode,jdbcType=VARCHAR}, #{areaParentcode,jdbcType=VARCHAR},
      #{areaName,jdbcType=VARCHAR}, #{areaGrade,jdbcType=VARCHAR}, #{fsort,jdbcType=INTEGER},
      #{addtime,jdbcType=TIMESTAMP}, #{adduserid,jdbcType=VARCHAR}, #{state,jdbcType=INTEGER},
      #{back1,jdbcType=VARCHAR}, #{back2,jdbcType=VARCHAR}, #{back3,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.hz.demo.model.sys_area">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    insert into SYS_AREA
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="areaCode != null">
        AREA_CODE,
      </if>
      <if test="areaParentcode != null">
        AREA_PARENTCODE,
      </if>
      <if test="areaName != null">
        AREA_NAME,
      </if>
      <if test="areaGrade != null">
        AREA_GRADE,
      </if>
      <if test="fsort != null">
        FSORT,
      </if>
      <if test="addtime != null">
        ADDTIME,
      </if>
      <if test="adduserid != null">
        ADDUSERID,
      </if>
      <if test="state != null">
        STATE,
      </if>
      <if test="back1 != null">
        BACK1,
      </if>
      <if test="back2 != null">
        BACK2,
      </if>
      <if test="back3 != null">
        BACK3,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="areaCode != null">
        #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="areaParentcode != null">
        #{areaParentcode,jdbcType=VARCHAR},
      </if>
      <if test="areaName != null">
        #{areaName,jdbcType=VARCHAR},
      </if>
      <if test="areaGrade != null">
        #{areaGrade,jdbcType=VARCHAR},
      </if>
      <if test="fsort != null">
        #{fsort,jdbcType=INTEGER},
      </if>
      <if test="addtime != null">
        #{addtime,jdbcType=TIMESTAMP},
      </if>
      <if test="adduserid != null">
        #{adduserid,jdbcType=VARCHAR},
      </if>
      <if test="state != null">
        #{state,jdbcType=INTEGER},
      </if>
      <if test="back1 != null">
        #{back1,jdbcType=VARCHAR},
      </if>
      <if test="back2 != null">
        #{back2,jdbcType=VARCHAR},
      </if>
      <if test="back3 != null">
        #{back3,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.hz.demo.model.sys_area">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    update SYS_AREA
    <set>
      <if test="areaCode != null">
        AREA_CODE = #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="areaParentcode != null">
        AREA_PARENTCODE = #{areaParentcode,jdbcType=VARCHAR},
      </if>
      <if test="areaName != null">
        AREA_NAME = #{areaName,jdbcType=VARCHAR},
      </if>
      <if test="areaGrade != null">
        AREA_GRADE = #{areaGrade,jdbcType=VARCHAR},
      </if>
      <if test="fsort != null">
        FSORT = #{fsort,jdbcType=INTEGER},
      </if>
      <if test="addtime != null">
        ADDTIME = #{addtime,jdbcType=TIMESTAMP},
      </if>
      <if test="adduserid != null">
        ADDUSERID = #{adduserid,jdbcType=VARCHAR},
      </if>
      <if test="state != null">
        STATE = #{state,jdbcType=INTEGER},
      </if>
      <if test="back1 != null">
        BACK1 = #{back1,jdbcType=VARCHAR},
      </if>
      <if test="back2 != null">
        BACK2 = #{back2,jdbcType=VARCHAR},
      </if>
      <if test="back3 != null">
        BACK3 = #{back3,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hz.demo.model.sys_area">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Sep 06 08:55:34 CST 2018.
    -->
    update SYS_AREA
    set AREA_CODE = #{areaCode,jdbcType=VARCHAR},
      AREA_PARENTCODE = #{areaParentcode,jdbcType=VARCHAR},
      AREA_NAME = #{areaName,jdbcType=VARCHAR},
      AREA_GRADE = #{areaGrade,jdbcType=VARCHAR},
      FSORT = #{fsort,jdbcType=INTEGER},
      ADDTIME = #{addtime,jdbcType=TIMESTAMP},
      ADDUSERID = #{adduserid,jdbcType=VARCHAR},
      STATE = #{state,jdbcType=INTEGER},
      BACK1 = #{back1,jdbcType=VARCHAR},
      BACK2 = #{back2,jdbcType=VARCHAR},
      BACK3 = #{back3,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=INTEGER}
  </update>

  <select id="selectAreaList" parameterType="com.hz.demo.model.sys_area" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from SYS_AREA
    where 1=1
    <if test="areaCode == null or areaCode==''">
     AND AREA_CODE = '410000'
    </if>
    <if test="areaCode != null and areaCode!=''">
       AND AREA_CODE = #{areaCode} OR AREA_GRADE = #{areaGrade} AND AREA_PARENTCODE = #{areaCode}
    </if>
  </select>

<!--根据条件 查实体 -->
  <select id="getAreaWhere" parameterType="com.hz.demo.model.sys_area" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" />
    from sys_area where area_code = #{areaCode} or area_code = (
    select area_parentcode from sys_area where area_code = #{areaCode} ) ORDER BY area_grade
  </select>
  <!--根据条件查询全部记录-->
  <select id="selectList1" parameterType="pd" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from sys_area WHERE 1=1
    <if test="areaCode != null and areaCode!='' ">
      and AREA_CODE = #{areaCode}
    </if>
    ORDER by fsort
  </select>

  <!--根据条件查询全部记录-->
  <select id="selectList" parameterType="pd" resultMap="BaseResultMap">
    select <include refid="Base_Column_List"/>
    from
    (select rownum rn,a.* from
    (select
    <include refid="Base_Column_List"/>
    from sys_area WHERE 1=1
    <if test="areaParentcode != null and areaParentcode!='' ">
      and AREA_PARENTCODE = #{areaParentcode}
    </if>
    <if test="areaName != null and areaName!='' ">
      and AREA_NAME like '%'||#{areaName}||'%'
    </if>
    ORDER by fsort) a
    <if test="page != null and rows != null">
      where rownum &lt;=#{rows}*#{page}) b
      where  rn>(#{page}-1)*#{rows}
    </if>
  </select>
  <!--根据条件查询全部记录个数-->
  <select id="selectCount" parameterType="pd" resultType="Integer">
    select count(*) as listcount
    from SYS_AREA WHERE 1=1
    <if test="areaParentcode != null and areaParentcode!='' ">
      and AREA_PARENTCODE = #{areaParentcode}
    </if>
    <if test="areaName != null and areaName!=''">
      and AREA_NAME like '%'||#{areaName}||'%'
    </if>
  </select>
  <!--获取菜单页面树-->
  <select id="getTreeList" parameterType="pd" resultType="Map">
    SELECT AREA_CODE as id,AREA_NAME as text, AREA_PARENTCODE as pid,AREA_GRADE as attributes  FROM SYS_AREA ORDER BY fsort
  </select>
</mapper>